<html><body>
	
<div id="test"></div>
	
<script src="/socket.io/socket.io.js"></script>

<script>
  var socket = io.connect('http://localhost:3005/');
  
  socket.emit('openurl',  'rfr_id=info:sid/berkeley.worldcat.org:worldcat&rft_val_fmt=info:ofi/fmt:kev:mtx:book&rft.genre=book&req_dat=<sessionid>&req_dat=<ip>169.229.122.132</ip>&rfe_dat=<accessionnumber>795781479</accessionnumber>&rft_id=info:oclcnum/795781479&rft_id=urn:ISBN:9781461436126&rft.aulast=Petersen&rft.aufirst=Peter&rft.title=Linear algebra&rft.date=2012&rft.isbn=9781461436126&rft.place=New York, NY :&rft.pub=Springer,&rft.identifier=QA184.2 .P48 2012&req_id=info:rfa/oclc/institutions/5689&req_id=info:rfa/oclc/Institutions/5689&rft.oclcnum=795781479');
	//'rft.isbn=9780300177619&rft.genre=book');
	//'rft.genre=book&rft.title=Unix+in+a+nutshell&rft.oclcnum=613266745');
	//'rft.oclcnum=490560603&rft.genre=book&rft.title=A%20Tale%20Of%20Two%20Cities&rft.aulast=dickens');
	//'rft.genre=book&rft.title=A%20Tale%20Of%20Two%20Cities&rft.aulast=dickens'); 
	//'rft.genre=book&rft.title=Dune&rft.aulast=herbert&rft.isbn=9780575035409');
  
  socket.on('citation', function (data) {
    update_div(data);
  });
  
  socket.on('author', function (data) {
    update_div(data);
  });
	
  socket.on('resource', function (data) {
    update_div(data);
  });
  
  socket.on('error', function (data) {
    update_div('<span style="color: red;">' + data + '</span>');
  });
  
  socket.on('complete', function (data) {
		update_div(data);
		socket.disconnect();
  });
  
  function update_div(data){
    var div = document.getElementById("test");
  	div.innerHTML = div.innerHTML + '<br /><br />' + data;
  }
</script>
</body>
</html>
