<html><body>
	
<div id="test"></div>
	
<script src="/socket.io/socket.io.js"></script>

<script>
  var socket = io.connect('http://localhost:3007/');
  
  socket.emit('openurl', 'rft.isbn=9780300177619&rft.genre=book'); //'url_ver=Z39.88-2004&url_ctx_fmt=info:ofi/fmt:kev:mtx:ctx&rft_val_fmt=info:ofi/fmt:kev:mtx:journal&rft.atitle=The%20impact%20of%20forest%20use%20and%20reforestation%20on%20soil%20hydraulic%20conductivity%20in%20the%20Western%20Ghats%20of%20India%3A%20Implications%20for%20surface%20and%20sub-surface%20hydrology&rft.aufirst=M%2E&rft.aulast=Bonell&rft.date=2010&rft.epage=64&rft.genre=article&rft.issn=0022-1694&rft.issue=1-2&rft.jtitle=JOURNAL%20OF%20HYDROLOGY&rft.pages=49-64&rft.spage=49&rft.stitle=J%20HYDROL&rft.volume=391&rfr_id=info:sid/www.isinet.com:WoK:UA&rft.au=Purandara%2C%20B%2E%20K%2E&rft.au=Venkatesh%2C%20B%2E&rft.au=Krishnaswamy%2C%20Jagdish&rft.au=Acharya%2C%20H%2E%20A%2E%20K%2E&rft_id=info:doi/10%2E1016%2Fj%2Ejhydrol%2E2010%2E07%2E004'); //'rfr_id=info:sid/berkeley.worldcat.org:worldcat&rft_val_fmt=info:ofi/fmt:kev:mtx:book&rft.genre=book&req_dat=<sessionid>&req_dat=<ip>169.229.122.132</ip>&rfe_dat=<accessionnumber>795781479</accessionnumber>&rft_id=info:oclcnum/795781479&rft_id=urn:ISBN:9781461436126&rft.aulast=Petersen&rft.aufirst=Peter&rft.title=Linear algebra&rft.date=2012&rft.isbn=9781461436126&rft.place=New York, NY :&rft.pub=Springer,&rft.identifier=QA184.2 .P48 2012&req_id=info:rfa/oclc/institutions/5689&req_id=info:rfa/oclc/Institutions/5689&rft.oclcnum=795781479');
	//'rft.isbn=9780300177619&rft.genre=book');
	//'rft.genre=book&rft.title=Unix+in+a+nutshell&rft.oclcnum=613266745');
	//'rft.oclcnum=490560603&rft.genre=book&rft.title=A%20Tale%20Of%20Two%20Cities&rft.aulast=dickens');
	//'rft.genre=book&rft.title=A%20Tale%20Of%20Two%20Cities&rft.aulast=dickens'); 
	//'rft.genre=book&rft.title=Dune&rft.aulast=herbert&rft.isbn=9780575035409');
  
  socket.on('citation', function (data) {
    update_div(data);
  });
  
  socket.on('author', function (data) {
    update_div(data);
  });
	
  socket.on('resource', function (data) {
    update_div(data);
  });
  
  socket.on('error', function (data) {
    update_div('<span style="color: red;">' + data + '</span>');
  });
  
  socket.on('complete', function (data) {
		update_div(data);
		socket.disconnect();
  });
  
  function update_div(data){
    var div = document.getElementById("test");
  	div.innerHTML = div.innerHTML + '<br /><br />' + data;
  }
</script>
</body>
</html>
